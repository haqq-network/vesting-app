(self.webpackChunk_haqq_vesting_app=self.webpackChunk_haqq_vesting_app||[]).push([[11],{"./src/OnboardingContainer.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{P:function(){return useOnboarding}});__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),ethers_lib_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ethers/lib/utils.js"),wagmi__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/wagmi/dist/wagmi.esm.js"),_config__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/config.ts"),_metamask_onboarding__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@metamask/onboarding/dist/metamask-onboarding.es.js"),_components_modals_NoMetamaskAlert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/modals/NoMetamaskAlert.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var OnboardingContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(void 0);function OnboardingContainer(_ref){var children=_ref.children,chain=(0,_config__WEBPACK_IMPORTED_MODULE_2__.zK)(),targetNetworkIdHex=(0,ethers_lib_utils__WEBPACK_IMPORTED_MODULE_6__.hexValue)(chain.id),onboarding=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("start"),2),step=_useState2[0],setOnboardingStep=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),2),isNoMetamaskModalOpen=_useState4[0],setNoMetamaskModalOpen=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),2),isOnboarded=_useState6[0],setOnboarded=_useState6[1],_useAccount=(0,wagmi__WEBPACK_IMPORTED_MODULE_7__.mA)(),isConnected=_useAccount.isConnected,address=_useAccount.address,_useConnect=(0,wagmi__WEBPACK_IMPORTED_MODULE_7__.$4)(),connect=_useConnect.connect,connectors=_useConnect.connectors,_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),2),errors=_useState8[0],setErrors=_useState8[1];(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){return console.log({step:step})}),[step]);var handleConnectWagmi=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(){connect({connector:connectors[0]})}),[connect,connectors]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){onboarding.current||(onboarding.current=new _metamask_onboarding__WEBPACK_IMPORTED_MODULE_3__.Z)}),[]);var handleConnectWallet=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((async function(){console.log("handleConnectWallet"),_metamask_onboarding__WEBPACK_IMPORTED_MODULE_3__.Z.isMetaMaskInstalled()?handleConnectWagmi():setNoMetamaskModalOpen(!0)}),[handleConnectWagmi]),handleStartOnboarding=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(){var _onboarding$current;null===(_onboarding$current=onboarding.current)||void 0===_onboarding$current||_onboarding$current.startOnboarding(),setNoMetamaskModalOpen(!1),setOnboardingStep("switch-network")}),[]),handleNetworkSwitch=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((async function(){console.log("handleNetworkSwitch");var ethereum=window.ethereum;if(ethereum)try{await ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:targetNetworkIdHex}]}),setOnboardingStep("finish")}catch(error){4902===error.code?setOnboardingStep("add-network"):setErrors(Object.assign({},errors,{switchNetworkError:error}))}}),[errors,targetNetworkIdHex]),handleNetworkAdd=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((async function(){var ethereum=window.ethereum;if(ethereum)try{await ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:targetNetworkIdHex,chainName:chain.name,rpcUrls:[chain.rpcUrls.default],nativeCurrency:chain.nativeCurrency}]}),setOnboardingStep("finish")}catch(error){setErrors(Object.assign({},errors,{addNetworkError:error}))}}),[chain.name,chain.nativeCurrency,chain.rpcUrls.default,errors,targetNetworkIdHex]),clearError=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(errorName){setErrors(Object.assign({},errors,{[errorName]:void 0}))}),[errors]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){var _window3,_window3$ethereum,_window4,_window4$ethereum;void 0!==address&&((null!==(_window3=window)&&void 0!==_window3&&null!==(_window3$ethereum=_window3.ethereum)&&void 0!==_window3$ethereum&&_window3$ethereum.networkVersion?Number.parseInt(null===(_window4=window)||void 0===_window4||null===(_window4$ethereum=_window4.ethereum)||void 0===_window4$ethereum?void 0:_window4$ethereum.networkVersion,10):null)!==chain.id?setOnboardingStep("switch-network"):setOnboardingStep("finish"))}),[address,chain.id]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){var _onboarding$current2;"finish"===step&&(null===(_onboarding$current2=onboarding.current)||void 0===_onboarding$current2||_onboarding$current2.stopOnboarding(),setOnboarded(!0))}),[step]);var memoizedHook=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){return{connectWallet:handleConnectWallet,startOnboarding:handleStartOnboarding,switchNetwork:handleNetworkSwitch,addNetwork:handleNetworkAdd,step:step,isOnboarded:isOnboarded,isConnected:isConnected,errors:errors,clearError:clearError}}),[handleConnectWallet,handleNetworkAdd,handleNetworkSwitch,handleStartOnboarding,isOnboarded,isConnected,step,errors,clearError]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(OnboardingContext.Provider,{value:memoizedHook,children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_components_modals_NoMetamaskAlert__WEBPACK_IMPORTED_MODULE_4__.q,{isOpen:isNoMetamaskModalOpen,onStartOnboarding:handleStartOnboarding,onClose:function(){return setNoMetamaskModalOpen(!1)}})]})}function useOnboarding(){var onboarding=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(OnboardingContext);if(!onboarding)throw new Error("useOnboarding should be used only from child of OnboardingContext");return onboarding}OnboardingContainer.displayName="OnboardingContainer";try{OnboardingContainer.displayName="OnboardingContainer",OnboardingContainer.__docgenInfo={description:"",displayName:"OnboardingContainer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OnboardingContainer.tsx#OnboardingContainer"]={docgenInfo:OnboardingContainer.__docgenInfo,name:"OnboardingContainer",path:"src/OnboardingContainer.tsx#OnboardingContainer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/NetworkStatus.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NetworkButton:function(){return NetworkButton},SupportedNetworkStatus:function(){return SupportedNetworkStatus},UnsupportedNetworkStatus:function(){return UnsupportedNetworkStatus},default:function(){return NetworkButton}});__webpack_require__("./node_modules/react/index.js");var clsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),ethers_lib_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ethers/lib/utils.js"),wagmi__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/wagmi/dist/wagmi.esm.js"),_OnboardingContainer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/OnboardingContainer.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function NetworkButton(){var chain=(0,wagmi__WEBPACK_IMPORTED_MODULE_3__.LN)().chain,switchNetwork=(0,_OnboardingContainer__WEBPACK_IMPORTED_MODULE_1__.P)().switchNetwork;return chain?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"flex items-center justify-center",children:null!=chain&&chain.unsupported?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(UnsupportedNetworkStatus,{onClick:switchNetwork}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SupportedNetworkStatus,{})}):null}function SupportedNetworkStatus(_ref){var onClick=_ref.onClick,chain=(0,wagmi__WEBPACK_IMPORTED_MODULE_3__.LN)().chain;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"group relative flex overflow-visible",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_4__.Z)("text-primary h-6 w-6",onClick?"cursor-pointer hover:opacity-80":"cursor-default"),onClick:onClick,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,onClick:onClick,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(0, 1)",d:"M9 12l2 2 4-5m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_4__.Z)("invisible absolute w-max mt-1 opacity-0 cursor-default","left-1/2 -translate-x-1/2 translate-y-2 top-full","transition ease-out duration-100","group-hover:visible group-hover:z-50 group-hover:opacity-100 group-hover:translate-y-0","py-[6px] px-[12px] rounded-md bg-primary shadow-xl text-white text-xs leading-snug"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:["You connected to ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("b",{children:null==chain?void 0:chain.name}),"."]})})]})}function UnsupportedNetworkStatus(_ref2){var onClick=_ref2.onClick,chain=(0,wagmi__WEBPACK_IMPORTED_MODULE_3__.LN)().chain;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"group relative flex",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_4__.Z)("text-danger h-6 w-6",onClick?"cursor-pointer hover:opacity-80":"cursor-default"),onClick:onClick,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_4__.Z)("invisible absolute w-max mt-1 opacity-0 cursor-default","left-1/2 -translate-x-1/2 translate-y-2 top-full","transition ease-out duration-100","group-hover:visible group-hover:z-50 group-hover:opacity-100 group-hover:translate-y-0","py-[6px] px-[12px] rounded-md bg-danger shadow-xl text-white text-xs leading-snug"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:["Network ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("b",{children:(null==chain?void 0:chain.id)&&(0,ethers_lib_utils__WEBPACK_IMPORTED_MODULE_5__.hexValue)(chain.id)})," is not supported.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("br",{}),"Click on this icon to switch network."]})})]})}NetworkButton.displayName="NetworkButton",SupportedNetworkStatus.displayName="SupportedNetworkStatus",UnsupportedNetworkStatus.displayName="UnsupportedNetworkStatus";try{SupportedNetworkStatus.displayName="SupportedNetworkStatus",SupportedNetworkStatus.__docgenInfo={description:"",displayName:"SupportedNetworkStatus",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/NetworkStatus.tsx#SupportedNetworkStatus"]={docgenInfo:SupportedNetworkStatus.__docgenInfo,name:"SupportedNetworkStatus",path:"src/components/NetworkStatus.tsx#SupportedNetworkStatus"})}catch(__react_docgen_typescript_loader_error){}try{UnsupportedNetworkStatus.displayName="UnsupportedNetworkStatus",UnsupportedNetworkStatus.__docgenInfo={description:"",displayName:"UnsupportedNetworkStatus",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/NetworkStatus.tsx#UnsupportedNetworkStatus"]={docgenInfo:UnsupportedNetworkStatus.__docgenInfo,name:"UnsupportedNetworkStatus",path:"src/components/NetworkStatus.tsx#UnsupportedNetworkStatus"})}catch(__react_docgen_typescript_loader_error){}},"./src/config.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{vc:function(){return config},zK:function(){return getChain}});var _process$env$BUILD_HA,_process$env$NETWORK,process=__webpack_require__("./node_modules/process/browser.js"),buildHash=null!==(_process$env$BUILD_HA=process.env.BUILD_HASH)&&void 0!==_process$env$BUILD_HA?_process$env$BUILD_HA:"dev",config={contractAddress:process.env.CONTRACT_ADDRESS,sentryDsn:process.env.SENTRY_DSN,network:null!==(_process$env$NETWORK=process.env.NETWORK)&&void 0!==_process$env$NETWORK?_process$env$NETWORK:"dev",version:"0.1.0-"+buildHash},currency={name:"Islamic Coin",symbol:"ISLM",decimals:18},chains={local:{id:1337,name:"Haqq Localnet",network:"haqq-localnet",rpcUrls:{default:"http://127.0.0.1:7545",ws:"ws://127.0.0.1:7545"},testnet:!0},dev:{id:121799,name:"Haqq Devnet",network:"haqq-devnet",rpcUrls:{default:"http://159.69.6.222:8545"},testnet:!0,nativeCurrency:currency},test:{id:53211,name:"Haqq Testnet",network:"haqq-testnet",rpcUrls:{default:"https://rpc.eth.testedge.haqq.network"},testnet:!0,nativeCurrency:currency},main:{id:11235,name:"Haqq Mainnet",network:"haqq-mainnet",rpcUrls:{default:"https://rpc.eth.haqq.network"},testnet:!1,nativeCurrency:currency}};function getChain(){var currentChain=chains[config.network];if(!currentChain)throw new Error("No configuration for "+config.network);return currentChain}},"?ff28":function(){},"?0707":function(){}}]);